<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import bluebird from 'bluebird';
import check from 'check-types';
import request from 'request-promise';
import urljoin from 'url-join';

import config from './config';

import DefaultHandler from './DefaultHandler';
import CouponHandler from './CouponHandler';

global.Promise = bluebird;

/** Thinkific API wrapper
 * @property {courses} courses A {@link DefaultHandler} for handling courses resource
 * @property {products} products A {@link DefaultHandler} for handling products resource
 * @property {promotions} promotions A {@link DefaultHandler} for handling promotions resource
 * @property {coupons} coupons A {@link CouponHandler} for handling coupons resource
*/
const Thinkific = class Thinkific {
  /**
   * @summary Constructs a new Thinkific requester.
   * @param  {object} opts An object containg the subdomain and API key
   * @param  {string} opts.apiKey API Key for authorization headers
   * @param  {string} opts.subdomain subdomain of Thinkific site
   * @returns {object} Return an object with access to Thinkific API resources: courses, products, promotions, coupons
   */
  constructor(opts) {
    check.assert.assigned(opts, 'Missing options parameter');
    check.assert.assigned(opts.apiKey, 'Missing apiKey option');
    check.assert.assigned(opts.subdomain, 'Missing subdomain option');

    this.apiKey = opts.apiKey;
    this.subdomain = opts.subdomain;
    this._header = {
      'x-auth-api-key': this.apiKey,
      'x-auth-subdomain': this.subdomain
    };

    this.courses = new DefaultHandler(config.urls.courses, this);
    this.products = new DefaultHandler(config.urls.products, this);
    this.promotions = new DefaultHandler(config.urls.promotions, this);
    this.coupons = new CouponHandler(config.urls.coupons, this);

  }

  _get(uri) {
    return request({
      method: 'GET',
      uri: urljoin(config.api, uri),
      headers: this._header,
      json: true
    });
  }

  _post(uri, data) {
    return request({
      method: 'POST',
      uri: urljoin(config.api, uri),
      headers: this._header,
      body: data,
      json: true
    });
  }

  _put(uri, data) {
    return request({
      method: 'PUT',
      uri: urljoin(config.api, uri),
      headers: this._header,
      body: data,
      json: true
    });
  }

  _del(uri) {
    return request({
      method: 'DELETE',
      uri: urljoin(config.api, uri),
      headers: this._header,
      json: true
    });
  }


};

export default Thinkific;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CouponHandler.html">CouponHandler</a></li><li><a href="DefaultHandler.html">DefaultHandler</a></li><li><a href="Iterable.html">Iterable</a></li><li><a href="Thinkific.html">Thinkific</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Jul 08 2017 23:40:10 GMT-0300 (E. South America Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
